import{j as e,s as o,p as C,c as y,r as N,B as f,J as w,K as v,L as T,M as W,N as P,P as L,O as B}from"./index-B8L1ET_r.js";import{T as F,a as k}from"./Tabs-WZ6dKxAm.js";import{B as R,a as j}from"./ButtonToolbar-s5MgQG8J.js";import{C as u}from"./Card-pLCPYu9_.js";import{C as $,R as _,a as p}from"./Row-CG7-5WiO.js";import{R as H}from"./index-CBz6tiFs.js";import"./ElementChildren-QsjcoXh7.js";const I="_container_rmimo_1",K={container:I};function d(n){function t(){const s=o.addSemaphoreDirection(n.encoding,n.direction),r=o.lookupSemaphoreEncoding(s);return r.exact.length>0?r.exact[0].toString():""}function i(s){const r=n.onChange;r&&r(s.currentTarget.checked?"add":"remove",n.direction)}return e.jsxs("div",{className:C(K.container,n.className),children:[e.jsx("input",{type:"checkbox",checked:o.hasSemaphoreDirection(n.encoding,n.direction),onChange:i}),e.jsx("label",{children:t()})]})}const M=[o.SemaphoreDirection.North,o.SemaphoreDirection.NorthEast,o.SemaphoreDirection.East,o.SemaphoreDirection.SouthEast,o.SemaphoreDirection.South,o.SemaphoreDirection.SouthWest,o.SemaphoreDirection.West,o.SemaphoreDirection.NorthWest];function O(n){const t=[];for(const i of M)if(o.hasSemaphoreDirection(n,i)){const s=o.semaphoreDirectionToDegrees(i);s!==void 0&&t.push(s)}return[t[0],t[1]]}function z(n){const t={left:-1,right:-1},[i,s]=O(n);return i!==void 0&&(s===void 0?i<=180?t.right=i:t.left=i:i===0&&s<=180||i<=45&&s<180||s<=90||i>=270?(t.left=i,t.right=s):(t.right=i,t.left=s)),t}function b(n){const{left:t,right:i}=z(n.encoding);function s(){return t>=0?e.jsx("use",{transform:`rotate(${t}, 33, 32)`,x:"33",xlinkHref:t===0||t>=180?"#LeftFlag":"#Flag",y:"4"}):null}function r(){return i>=0?e.jsx("use",{transform:`rotate(${i}, 43, 32)`,x:"43",xlinkHref:i<=180?"#Flag":"#LeftFlag",y:"4"}):null}return e.jsxs("svg",{width:n.width,viewBox:"0 0 76 64",children:[e.jsxs("defs",{children:[e.jsxs("g",{id:"Person",fill:"black",children:[e.jsx("circle",{r:"3.5",cx:"4",cy:"4"}),e.jsx("rect",{y:"8",width:"8",height:"16",rx:"2",ry:"2"})]}),e.jsxs("g",{id:"Flag",children:[e.jsx("polyline",{strokeWidth:"1",stroke:"black",points:"0 0, 0 20"}),e.jsx("polyline",{strokeWidth:"2",strokeLinecap:"round",stroke:"black",points:"0 20, 0 28"}),e.jsx("rect",{stroke:"black",height:"10",width:"10"}),e.jsx("polygon",{fill:"red",points:"0 0, 10 0, 0 10"}),e.jsx("polygon",{fill:"yellow",points:"10 0, 10 10, 0 10"})]}),e.jsx("g",{id:"LeftFlag",children:e.jsx("use",{xlinkHref:"#Flag",transform:"scale(-1, 1)"})})]}),e.jsx("use",{xlinkHref:"#Person",x:"34",y:"23"}),s(),r(),"Sorry, your browser does not support inline SVG."]})}const A="_container_1ihdb_1",G="_north_1ihdb_8",V="_northEast_1ihdb_14",J="_east_1ihdb_20",q="_southEast_1ihdb_26",Q="_south_1ihdb_26",U="_southWest_1ihdb_38",X="_west_1ihdb_44",Y="_northWest_1ihdb_50",a={container:A,north:G,northEast:V,east:J,southEast:q,south:Q,southWest:U,west:X,northWest:Y};function Z(n){function t(i,s){const r=n.onChange;r&&r(i,s)}return e.jsxs("div",{className:a.container,children:[e.jsx(d,{encoding:n.encoding,className:a.north,direction:o.SemaphoreDirection.North,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.northEast,direction:o.SemaphoreDirection.NorthEast,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.east,direction:o.SemaphoreDirection.East,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.southEast,direction:o.SemaphoreDirection.SouthEast,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.south,direction:o.SemaphoreDirection.South,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.southWest,direction:o.SemaphoreDirection.SouthWest,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.west,direction:o.SemaphoreDirection.West,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.northWest,direction:o.SemaphoreDirection.NorthWest,onChange:t}),e.jsx(b,{width:240,encoding:n.encoding})]})}const ee="_container_nmko6_1",ne="_input_nmko6_22",te="_view_nmko6_26",oe="_output_nmko6_31",x={container:ee,input:ne,view:te,output:oe},ie=n=>({encoding:n.encoding.semaphore.encoding,stream:n.encoding.semaphore.stream}),se={append:P,backspace:W,clear:T,setEncoding:v,space:w},re=y(ie,se);function ce(n){N.useEffect(()=>{function h(c){var g;if(c.defaultPrevented)return;let l=!1;if(c.key==="Backspace"||c.key==="Delete"||c.keyCode===8||c.keyCode===46){const E=Math.max(1,((g=window.getSelection())==null?void 0:g.toString().length)??0);for(let S=0;S<E;S++)n.backspace();l=!0}l&&c.preventDefault()}function m(c){if(c.defaultPrevented)return;let l=!1;if(c.keyCode===13)r(),l=!0;else if(c.charCode>=49&&c.charCode<=56){const g=o.degreesToSemaphoreDirection((c.charCode-49)*45);i(o.hasSemaphoreDirection(n.encoding,g)?"remove":"add",g),l=!0}l&&c.preventDefault()}return document.addEventListener("keydown",h),document.addEventListener("keypress",m),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keypress",m)}});function t(){n.backspace()}function i(h,m){switch(h){case"add":n.setEncoding(o.addSemaphoreDirection(n.encoding,m));break;case"remove":n.setEncoding(o.removeSemaphoreDirection(n.encoding,m));break;default:throw new Error("Invalid change type")}}function s(){n.clear()}function r(){const h=o.lookupSemaphoreEncoding(n.encoding);h.exact.length>0?n.append(h.exact[0].toString()):n.space()}const D=o.lookupSemaphoreEncoding(n.encoding).exactString;return e.jsxs("div",{className:x.container,children:[e.jsxs(u,{className:x.input,children:[e.jsx(u.Header,{children:"Input"}),e.jsx(u.Body,{children:e.jsxs($,{fluid:!0,children:[e.jsxs(_,{children:[e.jsx(p,{xs:"auto",sm:"auto",md:"auto",children:e.jsx(Z,{encoding:n.encoding,onChange:i})}),e.jsx(p,{children:e.jsx("div",{className:x.view,children:D||"?"})})]}),e.jsx(_,{children:e.jsx(p,{children:e.jsxs(R,{children:[e.jsx(j,{children:e.jsx(f,{onClick:t,children:"âŒ«"})}),e.jsx(j,{children:e.jsx(f,{onClick:r,children:"Next"})}),e.jsx(j,{children:e.jsx(f,{onClick:s,variant:"danger",children:"Clear"})})]})})})]})})]}),e.jsxs(u,{children:[e.jsx(u.Header,{children:"Output"}),e.jsx(u.Body,{children:e.jsxs("pre",{className:x.output,children:[n.stream,e.jsx("span",{className:"blinking-cursor",children:"|"})]})})]})]})}const ae=re(ce);function de(){const n=o.lookupSemaphoreEncoding(o.SemaphoreEncoding.None);return e.jsx(H,{children:n.partial.map(t=>e.jsxs("div",{children:[e.jsx(b,{width:96,encoding:t.encoding}),e.jsx("br",{}),t.display]},t.display))})}const he=n=>({selectedTab:n.encoding.semaphore.selectedTab}),le={selectTab:B},ue=y(he,le);function me(n){return e.jsx(L,{title:"Semaphore",children:e.jsxs(F,{activeKey:n.selectedTab,id:"Semaphore-tabs",onSelect:n.selectTab,children:[e.jsx(k,{eventKey:"1",title:"Value",children:e.jsx(ae,{})}),e.jsx(k,{eventKey:"2",title:"Reference",children:e.jsx(de,{})})]})})}const _e=ue(me);export{_e as default};

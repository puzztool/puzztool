import{j as e,p as w,s,c as C,r as v,B as j,J as N,K as D,L as E,M as P,N as T,P as W,O as F}from"./index-DMwsPt2d.js";import{T as L,a as S}from"./Tabs-D6oVHyyl.js";import{B,a as g}from"./ButtonToolbar-B9yw-aH4.js";import{C as u}from"./Card-8dIyfHyC.js";import{C as $,R as b,a as _}from"./Row-BQoIObE1.js";import{R}from"./index-tIvaMF3q.js";import"./ElementChildren-CI31AtR4.js";const H="_container_rmimo_1",K={container:H};function l(t){function r(){const a=t.character.getPotentialMatch(t.direction);return a?a.toString():""}function n(a){const o=t.onChange;o&&o(a.currentTarget.checked?"add":"remove",t.direction)}return e.jsxs("div",{className:w(K.container,t.className),children:[e.jsx("input",{type:"checkbox",checked:t.character.hasDirection(t.direction),onChange:n}),e.jsx("label",{children:r()})]})}function M(t){const r={left:-1,right:-1},[n,a]=t.getDegrees();return n!==void 0&&(a===void 0?n<=180?r.right=n:r.left=n:n===0&&a<=180||n<=45&&a<180||a<=90||n>=270?(r.left=n,r.right=a):(r.right=n,r.left=a)),r}function y(t){const{left:r,right:n}=M(t.character);function a(){return r>=0?e.jsx("use",{transform:`rotate(${r}, 33, 32)`,x:"33",xlinkHref:r===0||r>=180?"#LeftFlag":"#Flag",y:"4"}):null}function o(){return n>=0?e.jsx("use",{transform:`rotate(${n}, 43, 32)`,x:"43",xlinkHref:n<=180?"#Flag":"#LeftFlag",y:"4"}):null}return e.jsxs("svg",{width:t.width,viewBox:"0 0 76 64",children:[e.jsxs("defs",{children:[e.jsxs("g",{id:"Person",fill:"black",children:[e.jsx("circle",{r:"3.5",cx:"4",cy:"4"}),e.jsx("rect",{y:"8",width:"8",height:"16",rx:"2",ry:"2"})]}),e.jsxs("g",{id:"Flag",children:[e.jsx("polyline",{strokeWidth:"1",stroke:"black",points:"0 0, 0 20"}),e.jsx("polyline",{strokeWidth:"2",strokeLinecap:"round",stroke:"black",points:"0 20, 0 28"}),e.jsx("rect",{stroke:"black",height:"10",width:"10"}),e.jsx("polygon",{fill:"red",points:"0 0, 10 0, 0 10"}),e.jsx("polygon",{fill:"yellow",points:"10 0, 10 10, 0 10"})]}),e.jsx("g",{id:"LeftFlag",children:e.jsx("use",{xlinkHref:"#Flag",transform:"scale(-1, 1)"})})]}),e.jsx("use",{xlinkHref:"#Person",x:"34",y:"23"}),a(),o(),"Sorry, your browser does not support inline SVG."]})}const I="_container_1ihdb_1",z="_north_1ihdb_8",G="_northEast_1ihdb_14",O="_east_1ihdb_20",V="_southEast_1ihdb_26",A="_south_1ihdb_26",J="_southWest_1ihdb_38",q="_west_1ihdb_44",Q="_northWest_1ihdb_50",i={container:I,north:z,northEast:G,east:O,southEast:V,south:A,southWest:J,west:q,northWest:Q};function U(t){function r(n,a){const o=t.onChange;o&&o(n,a)}return e.jsxs("div",{className:i.container,children:[e.jsx(l,{character:t.character,className:i.north,direction:s.SemaphoreDirection.North,onChange:r}),e.jsx(l,{character:t.character,className:i.northEast,direction:s.SemaphoreDirection.NorthEast,onChange:r}),e.jsx(l,{character:t.character,className:i.east,direction:s.SemaphoreDirection.East,onChange:r}),e.jsx(l,{character:t.character,className:i.southEast,direction:s.SemaphoreDirection.SouthEast,onChange:r}),e.jsx(l,{character:t.character,className:i.south,direction:s.SemaphoreDirection.South,onChange:r}),e.jsx(l,{character:t.character,className:i.southWest,direction:s.SemaphoreDirection.SouthWest,onChange:r}),e.jsx(l,{character:t.character,className:i.west,direction:s.SemaphoreDirection.West,onChange:r}),e.jsx(l,{character:t.character,className:i.northWest,direction:s.SemaphoreDirection.NorthWest,onChange:r}),e.jsx(y,{width:240,character:t.character})]})}const X="_container_nmko6_1",Y="_input_nmko6_22",Z="_view_nmko6_26",ee="_output_nmko6_31",x={container:X,input:Y,view:Z,output:ee},te=t=>({directions:t.encoding.semaphore.directions,stream:t.encoding.semaphore.stream}),re={append:T,backspace:P,clear:E,setDirections:D,space:N},ne=C(te,re);function ae(t){v.useEffect(()=>{function d(c){if(c.defaultPrevented)return;let m=!1;c.keyCode===8&&(t.backspace(),m=!0),m&&c.preventDefault()}function h(c){if(c.defaultPrevented)return;let m=!1;if(c.keyCode===13)o(),m=!0;else if(c.charCode>=49&&c.charCode<=56){const k=new s.SemaphoreCharacter;k.directions=t.directions;const p=s.SemaphoreDegrees.FromDegrees((c.charCode-49)*45);n(k.hasDirection(p)?"remove":"add",p)}m&&c.preventDefault()}return document.addEventListener("keydown",d),document.addEventListener("keypress",h),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keypress",h)}});function r(){t.backspace()}function n(d,h){const c=new s.SemaphoreCharacter;switch(c.directions=t.directions,d){case"add":c.addDirection(h);break;case"remove":c.removeDirection(h);break;default:throw new Error("Invalid change type")}t.setDirections(c.directions)}function a(){t.clear()}function o(){const d=new s.SemaphoreCharacter;d.directions=t.directions;const h=d.getExactMatches();h.length>0?t.append(h[0].toString()):t.space()}const f=new s.SemaphoreCharacter;return f.directions=t.directions,e.jsxs("div",{className:x.container,children:[e.jsxs(u,{className:x.input,children:[e.jsx(u.Header,{children:"Input"}),e.jsx(u.Body,{children:e.jsxs($,{fluid:!0,children:[e.jsxs(b,{children:[e.jsx(_,{xs:"auto",sm:"auto",md:"auto",children:e.jsx(U,{character:f,onChange:n})}),e.jsx(_,{children:e.jsx("div",{className:x.view,children:f.toString()||"?"})})]}),e.jsx(b,{children:e.jsx(_,{children:e.jsxs(B,{children:[e.jsx(g,{children:e.jsx(j,{onClick:r,children:"âŒ«"})}),e.jsx(g,{children:e.jsx(j,{onClick:o,children:"Next"})}),e.jsx(g,{children:e.jsx(j,{onClick:a,variant:"danger",children:"Clear"})})]})})})]})})]}),e.jsxs(u,{children:[e.jsx(u.Header,{children:"Output"}),e.jsx(u.Body,{children:e.jsxs("pre",{className:x.output,children:[t.stream,e.jsx("span",{className:"blinking-cursor",children:"|"})]})})]})]})}const ce=ne(ae);function se(){const t=new s.SemaphoreCharacter().getPotentialMatches();return e.jsx(R,{children:t.map(r=>e.jsxs("div",{children:[e.jsx(y,{width:96,character:new s.SemaphoreCharacter(r.encoding,r.category)}),e.jsx("br",{}),r.display]},r.display))})}const oe=t=>({selectedTab:t.encoding.semaphore.selectedTab}),ie={selectTab:F},he=C(oe,ie);function le(t){return e.jsx(W,{title:"Semaphore",children:e.jsxs(L,{activeKey:t.selectedTab,id:"Semaphore-tabs",onSelect:t.selectTab,children:[e.jsx(S,{eventKey:"1",title:"Value",children:e.jsx(ce,{})}),e.jsx(S,{eventKey:"2",title:"Reference",children:e.jsx(se,{})})]})})}const _e=he(le);export{_e as default};

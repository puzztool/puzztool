import{j as e,p as D,s,c as b,r as N,B as k,J as v,K as E,L as P,M as T,N as W,P as F,O as L}from"./index-Dy_JOjBL.js";import{T as B,a as y}from"./Tabs-CQI6EG9h.js";import{B as $,a as _}from"./ButtonToolbar-2zKtyvct.js";import{C as u}from"./Card-C2y709Ca.js";import{C as R,R as C,a as p}from"./Row-DbDMvBcC.js";import{R as H}from"./index-C2NRmvke.js";import"./ElementChildren-BVY8K1JJ.js";const K="_container_rmimo_1",M={container:K};function l(t){function r(){const c=t.character.getPotentialMatch(t.direction);return c?c.toString():""}function n(c){const o=t.onChange;o&&o(c.currentTarget.checked?"add":"remove",t.direction)}return e.jsxs("div",{className:D(M.container,t.className),children:[e.jsx("input",{type:"checkbox",checked:t.character.hasDirection(t.direction),onChange:n}),e.jsx("label",{children:r()})]})}function I(t){const r={left:-1,right:-1},[n,c]=t.getDegrees();return n!==void 0&&(c===void 0?n<=180?r.right=n:r.left=n:n===0&&c<=180||n<=45&&c<180||c<=90||n>=270?(r.left=n,r.right=c):(r.right=n,r.left=c)),r}function w(t){const{left:r,right:n}=I(t.character);function c(){return r>=0?e.jsx("use",{transform:`rotate(${r}, 33, 32)`,x:"33",xlinkHref:r===0||r>=180?"#LeftFlag":"#Flag",y:"4"}):null}function o(){return n>=0?e.jsx("use",{transform:`rotate(${n}, 43, 32)`,x:"43",xlinkHref:n<=180?"#Flag":"#LeftFlag",y:"4"}):null}return e.jsxs("svg",{width:t.width,viewBox:"0 0 76 64",children:[e.jsxs("defs",{children:[e.jsxs("g",{id:"Person",fill:"black",children:[e.jsx("circle",{r:"3.5",cx:"4",cy:"4"}),e.jsx("rect",{y:"8",width:"8",height:"16",rx:"2",ry:"2"})]}),e.jsxs("g",{id:"Flag",children:[e.jsx("polyline",{strokeWidth:"1",stroke:"black",points:"0 0, 0 20"}),e.jsx("polyline",{strokeWidth:"2",strokeLinecap:"round",stroke:"black",points:"0 20, 0 28"}),e.jsx("rect",{stroke:"black",height:"10",width:"10"}),e.jsx("polygon",{fill:"red",points:"0 0, 10 0, 0 10"}),e.jsx("polygon",{fill:"yellow",points:"10 0, 10 10, 0 10"})]}),e.jsx("g",{id:"LeftFlag",children:e.jsx("use",{xlinkHref:"#Flag",transform:"scale(-1, 1)"})})]}),e.jsx("use",{xlinkHref:"#Person",x:"34",y:"23"}),c(),o(),"Sorry, your browser does not support inline SVG."]})}const z="_container_1ihdb_1",G="_north_1ihdb_8",O="_northEast_1ihdb_14",V="_east_1ihdb_20",A="_southEast_1ihdb_26",J="_south_1ihdb_26",q="_southWest_1ihdb_38",Q="_west_1ihdb_44",U="_northWest_1ihdb_50",i={container:z,north:G,northEast:O,east:V,southEast:A,south:J,southWest:q,west:Q,northWest:U};function X(t){function r(n,c){const o=t.onChange;o&&o(n,c)}return e.jsxs("div",{className:i.container,children:[e.jsx(l,{character:t.character,className:i.north,direction:s.SemaphoreDirection.North,onChange:r}),e.jsx(l,{character:t.character,className:i.northEast,direction:s.SemaphoreDirection.NorthEast,onChange:r}),e.jsx(l,{character:t.character,className:i.east,direction:s.SemaphoreDirection.East,onChange:r}),e.jsx(l,{character:t.character,className:i.southEast,direction:s.SemaphoreDirection.SouthEast,onChange:r}),e.jsx(l,{character:t.character,className:i.south,direction:s.SemaphoreDirection.South,onChange:r}),e.jsx(l,{character:t.character,className:i.southWest,direction:s.SemaphoreDirection.SouthWest,onChange:r}),e.jsx(l,{character:t.character,className:i.west,direction:s.SemaphoreDirection.West,onChange:r}),e.jsx(l,{character:t.character,className:i.northWest,direction:s.SemaphoreDirection.NorthWest,onChange:r}),e.jsx(w,{width:240,character:t.character})]})}const Y="_container_nmko6_1",Z="_input_nmko6_22",ee="_view_nmko6_26",te="_output_nmko6_31",j={container:Y,input:Z,view:ee,output:te},re=t=>({directions:t.encoding.semaphore.directions,stream:t.encoding.semaphore.stream}),ne={append:W,backspace:T,clear:P,setDirections:E,space:v},ae=b(re,ne);function ce(t){N.useEffect(()=>{function d(a){var x;if(a.defaultPrevented)return;let m=!1;if(a.key==="Backspace"||a.key==="Delete"||a.keyCode===8||a.keyCode===46){const f=Math.max(1,((x=window.getSelection())==null?void 0:x.toString().length)??0);for(let S=0;S<f;S++)t.backspace();m=!0}m&&a.preventDefault()}function h(a){if(a.defaultPrevented)return;let m=!1;if(a.keyCode===13)o(),m=!0;else if(a.charCode>=49&&a.charCode<=56){const x=new s.SemaphoreCharacter;x.directions=t.directions;const f=s.SemaphoreDegrees.FromDegrees((a.charCode-49)*45);n(x.hasDirection(f)?"remove":"add",f)}m&&a.preventDefault()}return document.addEventListener("keydown",d),document.addEventListener("keypress",h),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keypress",h)}});function r(){t.backspace()}function n(d,h){const a=new s.SemaphoreCharacter;switch(a.directions=t.directions,d){case"add":a.addDirection(h);break;case"remove":a.removeDirection(h);break;default:throw new Error("Invalid change type")}t.setDirections(a.directions)}function c(){t.clear()}function o(){const d=new s.SemaphoreCharacter;d.directions=t.directions;const h=d.getExactMatches();h.length>0?t.append(h[0].toString()):t.space()}const g=new s.SemaphoreCharacter;return g.directions=t.directions,e.jsxs("div",{className:j.container,children:[e.jsxs(u,{className:j.input,children:[e.jsx(u.Header,{children:"Input"}),e.jsx(u.Body,{children:e.jsxs(R,{fluid:!0,children:[e.jsxs(C,{children:[e.jsx(p,{xs:"auto",sm:"auto",md:"auto",children:e.jsx(X,{character:g,onChange:n})}),e.jsx(p,{children:e.jsx("div",{className:j.view,children:g.toString()||"?"})})]}),e.jsx(C,{children:e.jsx(p,{children:e.jsxs($,{children:[e.jsx(_,{children:e.jsx(k,{onClick:r,children:"âŒ«"})}),e.jsx(_,{children:e.jsx(k,{onClick:o,children:"Next"})}),e.jsx(_,{children:e.jsx(k,{onClick:c,variant:"danger",children:"Clear"})})]})})})]})})]}),e.jsxs(u,{children:[e.jsx(u.Header,{children:"Output"}),e.jsx(u.Body,{children:e.jsxs("pre",{className:j.output,children:[t.stream,e.jsx("span",{className:"blinking-cursor",children:"|"})]})})]})]})}const se=ae(ce);function oe(){const t=new s.SemaphoreCharacter().getPotentialMatches();return e.jsx(H,{children:t.map(r=>e.jsxs("div",{children:[e.jsx(w,{width:96,character:new s.SemaphoreCharacter(r.encoding,r.category)}),e.jsx("br",{}),r.display]},r.display))})}const ie=t=>({selectedTab:t.encoding.semaphore.selectedTab}),he={selectTab:L},le=b(ie,he);function de(t){return e.jsx(F,{title:"Semaphore",children:e.jsxs(B,{activeKey:t.selectedTab,id:"Semaphore-tabs",onSelect:t.selectTab,children:[e.jsx(y,{eventKey:"1",title:"Value",children:e.jsx(se,{})}),e.jsx(y,{eventKey:"2",title:"Reference",children:e.jsx(oe,{})})]})})}const _e=le(de);export{_e as default};

import{j as e,s,p as w,c as y,r as N,B as f,J as v,K as D,L as T,M as P,N as W,P as L,O as B}from"./index-R_wCElQH.js";import{T as F,a as S}from"./Tabs-CeDRTD6D.js";import{B as $,a as j}from"./ButtonToolbar-Ps6ZC3MJ.js";import{C as u}from"./Card-BAe-BFEA.js";import{C as R,R as _,a as k}from"./Row-Bwhz3Cgo.js";import{R as H}from"./index-DFeSHisz.js";import"./ElementChildren-2ioV3V6P.js";const K="_container_rmimo_1",I={container:K};function d(n){function t(){const i=s.addSemaphoreDirection(n.encoding,n.direction),c=s.lookupSemaphoreEncoding(i);return c.exact.length>0?c.exact[0].toString():""}function o(i){const c=n.onChange;c&&c(i.currentTarget.checked?"add":"remove",n.direction)}return e.jsxs("div",{className:w(I.container,n.className),children:[e.jsx("input",{type:"checkbox",checked:s.hasSemaphoreDirection(n.encoding,n.direction),onChange:o}),e.jsx("label",{children:t()})]})}function M(n){const t={left:-1,right:-1},[o,i]=s.getEncodingDegrees(n);return o!==void 0&&(i===void 0?o<=180?t.right=o:t.left=o:o===0&&i<=180||o<=45&&i<180||i<=90||o>=270?(t.left=o,t.right=i):(t.right=o,t.left=i)),t}function b(n){const{left:t,right:o}=M(n.encoding);function i(){return t>=0?e.jsx("use",{transform:`rotate(${t}, 33, 32)`,x:"33",xlinkHref:t===0||t>=180?"#LeftFlag":"#Flag",y:"4"}):null}function c(){return o>=0?e.jsx("use",{transform:`rotate(${o}, 43, 32)`,x:"43",xlinkHref:o<=180?"#Flag":"#LeftFlag",y:"4"}):null}return e.jsxs("svg",{width:n.width,viewBox:"0 0 76 64",children:[e.jsxs("defs",{children:[e.jsxs("g",{id:"Person",fill:"black",children:[e.jsx("circle",{r:"3.5",cx:"4",cy:"4"}),e.jsx("rect",{y:"8",width:"8",height:"16",rx:"2",ry:"2"})]}),e.jsxs("g",{id:"Flag",children:[e.jsx("polyline",{strokeWidth:"1",stroke:"black",points:"0 0, 0 20"}),e.jsx("polyline",{strokeWidth:"2",strokeLinecap:"round",stroke:"black",points:"0 20, 0 28"}),e.jsx("rect",{stroke:"black",height:"10",width:"10"}),e.jsx("polygon",{fill:"red",points:"0 0, 10 0, 0 10"}),e.jsx("polygon",{fill:"yellow",points:"10 0, 10 10, 0 10"})]}),e.jsx("g",{id:"LeftFlag",children:e.jsx("use",{xlinkHref:"#Flag",transform:"scale(-1, 1)"})})]}),e.jsx("use",{xlinkHref:"#Person",x:"34",y:"23"}),i(),c(),"Sorry, your browser does not support inline SVG."]})}const z="_container_1ihdb_1",G="_north_1ihdb_8",O="_northEast_1ihdb_14",V="_east_1ihdb_20",A="_southEast_1ihdb_26",J="_south_1ihdb_26",q="_southWest_1ihdb_38",Q="_west_1ihdb_44",U="_northWest_1ihdb_50",a={container:z,north:G,northEast:O,east:V,southEast:A,south:J,southWest:q,west:Q,northWest:U};function X(n){function t(o,i){const c=n.onChange;c&&c(o,i)}return e.jsxs("div",{className:a.container,children:[e.jsx(d,{encoding:n.encoding,className:a.north,direction:s.SemaphoreDirection.North,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.northEast,direction:s.SemaphoreDirection.NorthEast,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.east,direction:s.SemaphoreDirection.East,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.southEast,direction:s.SemaphoreDirection.SouthEast,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.south,direction:s.SemaphoreDirection.South,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.southWest,direction:s.SemaphoreDirection.SouthWest,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.west,direction:s.SemaphoreDirection.West,onChange:t}),e.jsx(d,{encoding:n.encoding,className:a.northWest,direction:s.SemaphoreDirection.NorthWest,onChange:t}),e.jsx(b,{width:240,encoding:n.encoding})]})}const Y="_container_nmko6_1",Z="_input_nmko6_22",ee="_view_nmko6_26",ne="_output_nmko6_31",x={container:Y,input:Z,view:ee,output:ne},te=n=>({encoding:n.encoding.semaphore.encoding,stream:n.encoding.semaphore.stream}),oe={append:W,backspace:P,clear:T,setEncoding:D,space:v},se=y(te,oe);function ie(n){N.useEffect(()=>{function l(r){var m;if(r.defaultPrevented)return;let h=!1;if(r.key==="Backspace"||r.key==="Delete"||r.keyCode===8||r.keyCode===46){const C=Math.max(1,((m=window.getSelection())==null?void 0:m.toString().length)??0);for(let p=0;p<C;p++)n.backspace();h=!0}h&&r.preventDefault()}function g(r){if(r.defaultPrevented)return;let h=!1;if(r.keyCode===13)c(),h=!0;else if(r.charCode>=49&&r.charCode<=56){const m=s.degreesToSemaphoreDirection((r.charCode-49)*45);o(s.hasSemaphoreDirection(n.encoding,m)?"remove":"add",m),h=!0}h&&r.preventDefault()}return document.addEventListener("keydown",l),document.addEventListener("keypress",g),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keypress",g)}});function t(){n.backspace()}function o(l,g){switch(l){case"add":n.setEncoding(s.addSemaphoreDirection(n.encoding,g));break;case"remove":n.setEncoding(s.removeSemaphoreDirection(n.encoding,g));break;default:throw new Error("Invalid change type")}}function i(){n.clear()}function c(){const l=s.lookupSemaphoreEncoding(n.encoding);l.exact.length>0?n.append(l.exact[0].toString()):n.space()}const E=s.lookupSemaphoreEncoding(n.encoding).exactString;return e.jsxs("div",{className:x.container,children:[e.jsxs(u,{className:x.input,children:[e.jsx(u.Header,{children:"Input"}),e.jsx(u.Body,{children:e.jsxs(R,{fluid:!0,children:[e.jsxs(_,{children:[e.jsx(k,{xs:"auto",sm:"auto",md:"auto",children:e.jsx(X,{encoding:n.encoding,onChange:o})}),e.jsx(k,{children:e.jsx("div",{className:x.view,children:E||"?"})})]}),e.jsx(_,{children:e.jsx(k,{children:e.jsxs($,{children:[e.jsx(j,{children:e.jsx(f,{onClick:t,children:"âŒ«"})}),e.jsx(j,{children:e.jsx(f,{onClick:c,children:"Next"})}),e.jsx(j,{children:e.jsx(f,{onClick:i,variant:"danger",children:"Clear"})})]})})})]})})]}),e.jsxs(u,{children:[e.jsx(u.Header,{children:"Output"}),e.jsx(u.Body,{children:e.jsxs("pre",{className:x.output,children:[n.stream,e.jsx("span",{className:"blinking-cursor",children:"|"})]})})]})]})}const ce=se(ie);function re(){const n=s.lookupSemaphoreEncoding(s.SemaphoreEncoding.None);return e.jsx(H,{children:n.partial.map(t=>e.jsxs("div",{children:[e.jsx(b,{width:96,encoding:t.encoding}),e.jsx("br",{}),t.display]},t.display))})}const ae=n=>({selectedTab:n.encoding.semaphore.selectedTab}),de={selectTab:B},le=y(ae,de);function he(n){return e.jsx(L,{title:"Semaphore",children:e.jsxs(F,{activeKey:n.selectedTab,id:"Semaphore-tabs",onSelect:n.selectTab,children:[e.jsx(S,{eventKey:"1",title:"Value",children:e.jsx(ce,{})}),e.jsx(S,{eventKey:"2",title:"Reference",children:e.jsx(re,{})})]})})}const pe=le(he);export{pe as default};
